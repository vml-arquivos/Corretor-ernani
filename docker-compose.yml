 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/docker-compose.yml b/docker-compose.yml
index e6aaaaa3f7a6045923e0b16f28b3993dba5478d9..196cf455225975f9ded12bf6df16d3a5cbda9fa6 100644
--- a/docker-compose.yml
+++ b/docker-compose.yml
@@ -1,77 +1,46 @@
-version: '3.8'
-
 services:
-  # ============================================
-  # Aplicação Web (Frontend + Backend)
-  # ============================================
   app:
+    container_name: corretordasmansoes-app
     build:
       context: .
       dockerfile: Dockerfile
-    container_name: corretordasmansoes-app
     restart: unless-stopped
-    ports:
-      - "${APP_PORT:-3000}:3000"
     environment:
-      # Configurações gerais
       NODE_ENV: production
       PORT: 3000
-      
-      # Banco de dados (Supabase PostgreSQL)
       DATABASE_URL: ${DATABASE_URL}
-      
-      # Autenticação JWT
       JWT_SECRET: ${JWT_SECRET}
-      
-      # OAuth Manus
       VITE_APP_ID: ${VITE_APP_ID}
       OAUTH_SERVER_URL: ${OAUTH_SERVER_URL:-https://oauth.manus.im}
       VITE_OAUTH_PORTAL_URL: ${VITE_OAUTH_PORTAL_URL:-https://portal.manus.im}
-      
-      # Owner Info
       OWNER_OPEN_ID: ${OWNER_OPEN_ID}
       OWNER_NAME: ${OWNER_NAME:-Ernani Nunes}
-      
-      # Manus Forge API (Backend)
       BUILT_IN_FORGE_API_URL: ${BUILT_IN_FORGE_API_URL:-https://forge.manus.im}
       BUILT_IN_FORGE_API_KEY: ${BUILT_IN_FORGE_API_KEY}
-      
-      # Manus Forge API (Frontend)
       VITE_FRONTEND_FORGE_API_URL: ${VITE_FRONTEND_FORGE_API_URL:-https://forge.manus.im}
       VITE_FRONTEND_FORGE_API_KEY: ${VITE_FRONTEND_FORGE_API_KEY}
-      
-      # N8N Integration (Opcional)
       N8N_WEBHOOK_URL: ${N8N_WEBHOOK_URL}
       N8N_API_KEY: ${N8N_API_KEY}
-      
-      # AWS S3 (Opcional)
       AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID}
       AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY}
       AWS_S3_BUCKET: ${AWS_S3_BUCKET}
       AWS_REGION: ${AWS_REGION:-us-east-1}
-      
-      # Analytics
       VITE_ANALYTICS_ENDPOINT: ${VITE_ANALYTICS_ENDPOINT}
       VITE_ANALYTICS_WEBSITE_ID: ${VITE_ANALYTICS_WEBSITE_ID}
-      
-      # App Info
       VITE_APP_TITLE: ${VITE_APP_TITLE:-Corretor das Mansões - Ernani Nunes}
       VITE_APP_LOGO: ${VITE_APP_LOGO}
-      
-      # Timezone
       TZ: ${TZ:-America/Sao_Paulo}
+    ports:
+      - "${APP_PORT:-3000}:3000"
     networks:
       - corretor-network
     healthcheck:
-      test: ["CMD", "wget", "--no-verbose", "--tries=1", "--spider", "http://localhost:3000/health"]
+      test: ["CMD", "node", "-e", "require('http').get('http://localhost:3000/health', (r) => process.exit(r.statusCode === 200 ? 0 : 1))"]
       interval: 30s
       timeout: 10s
       retries: 3
       start_period: 40s
 
-# ============================================
-# Networks
-# ============================================
 networks:
   corretor-network:
     driver: bridge
 
EOF
)
